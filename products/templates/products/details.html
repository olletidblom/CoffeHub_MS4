{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-5">
  <div class="row">
    <div class="col-md-6">
      <img src="{% static product.image_url %}" class="img-fluid rounded shadow" alt="{{ product.name }}">
    </div>
    <div class="col-md-6">
      <h2>{{ product.name }}</h2>
      <p class="lead">{{ product.description }}</p>
      <p><strong>Price:</strong> ${{ product.price }}</p>
      <a href="#" class="btn btn-dark mt-3">Add to Cart</a>
    </div>
  </div>

  <hr class="my-5">

  <div class="row">
    <div class="col-12">
      <h4>Reviews</h4>
      {% for comment in comments %}
        <div class="mb-3 p-3 border rounded bg-light">
          <strong>{{ comment.user.username }}</strong> <small class="text-muted">{{ comment.created_at }}</small>
          <p>{{ comment.text }}</p>
        </div>
      {% empty %}
        <p>No reviews yet.</p>
      {% endfor %}

      {% if user.is_authenticated %}
        <form method="post">
          {% csrf_token %}
          {{ form.as_p }}
          <button type="submit" class="btn btn-primary">Submit Review</button>
        </form>
      {% else %}
        <p><a href="{% url 'account_login' %}">Log in</a> to write a review.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
